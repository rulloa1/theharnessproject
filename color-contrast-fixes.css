/**
 * HARNESS PROJECT - COLOR CONTRAST FIXES
 * WCAG 2.1 AA Compliance
 * Created: January 25, 2026
 * 
 * Purpose: Ensure all text and UI elements meet WCAG 2.1 Level AA
 * contrast requirements (4.5:1 for normal text, 3:1 for large text/UI)
 */

:root {
    /* Original HARNESS colors */
    --primary-cyan: #00B0BD;
    --primary-pink: #DD0E6E;
    --accent-yellow: #F6CC00;
    --dark-gray: #333333;
    --text-gray: #666666;
    --light-bg: #F8F9FA;
    
    /* WCAG AA-compliant variations */
    --primary-cyan-dark: #00939E;     /* 4.5:1 on white - for small text */
    --accent-yellow-dark: #D4A800;    /* 4.8:1 on white - readable yellow */
    --text-gray-medium: #777777;      /* 4.7:1 on white - minimum for normal text */
    --error-red: #C10020;             /* 5.9:1 on white - strong contrast */
    --success-green: #0B7A0B;         /* 4.5:1 on white - readable green */
    --warning-orange: #8C5000;        /* 5.2:1 on white - readable orange */
}

/* =================================================================
   YELLOW TEXT FIXES (Original yellow fails contrast)
   ================================================================= */

.text-yellow,
.accent-text,
.yellow-text,
[class*="yellow"] {
    color: var(--accent-yellow-dark) !important;
}

/* Yellow backgrounds should have dark text */
.bg-yellow,
[style*="background: #F6CC00"],
[style*="background-color: #F6CC00"] {
    color: var(--dark-gray) !important;
}

/* =================================================================
   CYAN TEXT FIXES (Small cyan text needs darker shade)
   ================================================================= */

.text-cyan,
a.text-cyan:not(h1 *, h2 *, .large-text *),
[class*="cyan-text"] {
    color: var(--primary-cyan-dark);
}

/* Large text can use bright cyan (18pt+ or 24px+) */
h1 .text-cyan,
h2 .text-cyan,
h3 .text-cyan,
.large-text.text-cyan,
.hero .text-cyan {
    color: var(--primary-cyan); /* Original bright cyan OK for large text */
}

/* =================================================================
   GRAY TEXT FIXES (Light gray fails contrast)
   ================================================================= */

.text-muted,
.text-secondary,
.text-light-gray,
[class*="gray-text"]:not([class*="dark-gray"]) {
    color: var(--text-gray) !important; /* #666 = 5.7:1 contrast */
}

/* Ensure placeholder text is readable */
::placeholder {
    color: var(--text-gray);
    opacity: 1;
}

::-webkit-input-placeholder {
    color: var(--text-gray);
    opacity: 1;
}

::-moz-placeholder {
    color: var(--text-gray);
    opacity: 1;
}

:-ms-input-placeholder {
    color: var(--text-gray);
    opacity: 1;
}

/* =================================================================
   GRADIENT TEXT FIXES (Add shadow for readability)
   ================================================================= */

.gradient-text,
[style*="gradient"] {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
    font-weight: 600; /* Bolder text helps readability */
}

/* Gradient backgrounds should have dark or white text */
[style*="linear-gradient"] {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* =================================================================
   LINK CONTRAST FIXES
   ================================================================= */

a {
    color: var(--primary-pink); /* 5.4:1 - Good for normal text */
}

a:hover,
a:focus {
    color: #B30B59; /* Darker pink - even better contrast */
    text-decoration: underline;
}

/* Light links on dark backgrounds */
[class*="dark"] a,
footer a,
.bg-dark a {
    color: #FFF;
    text-decoration: underline;
}

/* =================================================================
   BUTTON & INTERACTIVE ELEMENT FIXES
   ================================================================= */

button,
.btn,
[type="button"],
[type="submit"],
[role="button"] {
    /* Ensure visible borders (3:1 contrast minimum) */
    border: 2px solid currentColor;
    min-height: 44px; /* WCAG touch target size */
    min-width: 44px;
    padding: 10px 20px;
}

/* Primary buttons */
.btn-primary,
[class*="primary-btn"] {
    background: var(--primary-pink);
    color: #FFF; /* 3.9:1 - OK for large text */
    border-color: var(--primary-pink);
}

/* Secondary buttons */
.btn-secondary,
[class*="secondary-btn"] {
    background: transparent;
    color: var(--dark-gray);
    border-color: var(--dark-gray);
}

/* =================================================================
   FOCUS INDICATOR FIXES (Must be 3:1 contrast)
   ================================================================= */

*:focus {
    outline: 3px solid var(--primary-pink);
    outline-offset: 2px;
}

/* Remove outline for mouse users, keep for keyboard */
*:focus:not(:focus-visible) {
    outline: none;
}

*:focus-visible {
    outline: 3px solid var(--primary-pink);
    outline-offset: 2px;
    box-shadow: 0 0 0 6px rgba(221, 14, 110, 0.2);
}

/* =================================================================
   FORM ELEMENT FIXES
   ================================================================= */

input,
textarea,
select {
    border: 2px solid var(--text-gray); /* Visible border */
    color: var(--dark-gray);
    background: #FFF;
}

input:focus,
textarea:focus,
select:focus {
    border-color: var(--primary-pink);
    outline: none;
    box-shadow: 0 0 0 3px rgba(221, 14, 110, 0.2);
}

/* Labels must be readable */
label,
.form-label {
    color: var(--dark-gray);
    font-weight: 500;
}

/* Required indicators */
.required::after,
[required] + label::after,
[aria-required="true"] + label::after {
    content: " *";
    color: var(--error-red);
    font-weight: bold;
}

/* =================================================================
   MESSAGE / ALERT FIXES (Strong contrast required)
   ================================================================= */

.error,
.error-message,
[role="alert"],
[class*="alert-danger"] {
    color: var(--error-red);
    background: #FCE8EC;
    border: 2px solid var(--error-red);
    padding: 15px;
    border-radius: 8px;
    font-weight: 600;
}

.success,
.success-message,
[class*="alert-success"] {
    color: var(--success-green);
    background: #E8F5E8;
    border: 2px solid var(--success-green);
    padding: 15px;
    border-radius: 8px;
    font-weight: 600;
}

.warning,
.warning-message,
[class*="alert-warning"] {
    color: var(--warning-orange);
    background: #FFF4E5;
    border: 2px solid var(--warning-orange);
    padding: 15px;
    border-radius: 8px;
    font-weight: 600;
}

/* =================================================================
   DISABLED ELEMENT FIXES
   ================================================================= */

:disabled,
[disabled],
[aria-disabled="true"] {
    color: var(--text-gray) !important;
    opacity: 0.7;
    cursor: not-allowed;
}

/* =================================================================
   NAVIGATION FIXES
   ================================================================= */

nav a,
.nav-link {
    color: var(--dark-gray);
}

nav a:hover,
.nav-link:hover,
nav a:focus,
.nav-link:focus {
    color: var(--primary-pink);
}

/* =================================================================
   FOOTER FIXES
   ================================================================= */

footer {
    background: var(--dark-gray);
    color: #FFF; /* 12.6:1 excellent contrast */
}

footer a {
    color: #FFF;
    text-decoration: underline;
}

footer a:hover,
footer a:focus {
    color: var(--accent-yellow-dark);
}

/* =================================================================
   CODE BLOCK FIXES
   ================================================================= */

code,
pre,
.code-block,
kbd {
    background: #F5F5F5;
    color: var(--dark-gray);
    border: 1px solid #CCC;
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
}

pre {
    padding: 15px;
    overflow-x: auto;
}

/* =================================================================
   TABLE FIXES
   ================================================================= */

th,
.table-header {
    background: var(--dark-gray);
    color: #FFF;
    font-weight: 600;
    padding: 12px;
}

td {
    color: var(--dark-gray);
    border: 1px solid #DDD;
    padding: 12px;
}

/* =================================================================
   ICON & GRAPHIC FIXES
   ================================================================= */

.icon,
[class*="icon-"],
svg {
    /* Ensure icons have sufficient contrast */
    color: var(--dark-gray);
}

.icon:hover,
[class*="icon-"]:hover {
    color: var(--primary-pink);
}

/* =================================================================
   MOBILE ADJUSTMENTS
   ================================================================= */

@media (max-width: 768px) {
    /* Larger touch targets */
    button,
    a,
    [role="button"],
    input,
    select,
    .btn {
        min-height: 48px;
        min-width: 48px;
        padding: 14px;
        font-size: 16px;
    }
    
    /* Increase base font size for readability */
    body {
        font-size: 16px;
        line-height: 1.5;
    }
    
    /* Ensure headings are large enough for reduced contrast */
    h1 { font-size: 32px; }
    h2 { font-size: 28px; }
    h3 { font-size: 24px; }
}

/* =================================================================
   PRINT STYLES
   ================================================================= */

@media print {
    /* Ensure printed content is readable */
    * {
        color: #000 !important;
        background: #FFF !important;
        text-shadow: none !important;
        box-shadow: none !important;
    }
    
    a {
        text-decoration: underline;
        color: #000 !important;
    }
    
    a[href]::after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
    }
}

/* =================================================================
   HIGH CONTRAST MODE SUPPORT
   ================================================================= */

@media (prefers-contrast: high) {
    * {
        border-width: 2px !important;
    }
    
    a {
        text-decoration: underline !important;
    }
    
    button,
    input,
    select {
        border: 3px solid currentColor !important;
    }
}

/* =================================================================
   REDUCED MOTION SUPPORT
   ================================================================= */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}
